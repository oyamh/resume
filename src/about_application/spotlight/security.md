# セキュリティ
## ログイン
- ログインにはSNS(GitHub, Google)のOAuth認証APIを使っています。
- ログインに使われるCookieはHttpOnly属性やSecure属性を使ってセキュアにしています。
- ログインにはJWT形式のStateトークンを使って、よりセキュアなログインを実現しています。
    - 署名されたStateトークンに埋め込んだNonce値と、HttpOnlyなCookieのNonce値とを組み合わせたHash値を、キャッシュに保存してあるHash値と一致検証して、ログインの正当性を判定しています。
- メールアドレスによる認証では、独自に認証コードを発行して外部サービス経由のメールで送信しています。
## JWT
- 各サーバーとの通信にはJWT形式のアクセストークンを使用しています。
- アクセストークンの期限は短く設定し、より安全に保管しているリフレッシュトークンを使って再取得させています。
## Dockerコンテナ
- Docker Secretを使ってセキュアなImageを構築しています。
    - Docker SecretはImageの構築コマンド履歴に環境変数やSecretが残ってしまうのを防ぐために使われます。
        - 履歴を見られること（docker historyコマンド）によって、Imageに使われた環境変数やSecretが漏洩するのを防ぎます。
