# バックエンド開発(Go)
## マイクロサービス
- ブラウザ上のフロントエンドと複数のAPIサーバーが、それぞれ必要に応じてデータ通信を行います。
- 認証情報はトークンとしてブラウザが保有し、HTTPヘッダーに付与して通信を行います。
## クリーンアーキテクチャ
- 各レイヤーで依存を分離しつつ、依存関係を単一方向にしています。
## データベース関連
- テーブル設計
    - 外部キーを最大限に活用しています。
        - テーブル結合によって効率的な検索を実現しました。
    - 複合的な操作を実現するために、正規化の余地を残しています。
        - フォルダもタグもブックマークとして同じテーブルに入れています。
            - フォルダにタグを付けたり、タグ自体にもタグを付けることができます。
- ORM(Object Relational Mapping)を使わずに実装
    - 事前にSQLを定義し、Stored Procedureとして使用しています。
        - Placeholder機能を使うことで、セキュアなSQLを構築できます。
    - 検索では、サーバー内でSQLを動的に構築して高度な検索を実現しています。
        - 検索クエリに応じて、WHERE句とINNER JOIN句を動的に構築しています。
        - Stored ProcedureとPlaceholderを使うことで、SQLをセキュアに保っています。
        - フォルダ検索の場合には、WITH RECURSIVE句を使ってフォルダの再帰的な検索ができます。
## キャッシュ
- 依存の分離
    - 開発中はRedisのホスティングを想定していました。
    - 本番環境では費用を抑えるため、Redisのホスティングを諦めてGoogle Cloud Firestoreに変えました。
        - 依存を適切に分離していたので、変更に対して楽に対応できました。
## メールアドレスのみによる認証
- メールアドレスによる認証では、独自に認証コードを発行してEメールで送信しています。
## gRPC通信
- gRPCを使って通信を行います。
    - 通信データには、Protocol Bufferスキーマで定義されたデータ型を使っています。
    - Connectで出力した型安全なコードを使ってクライアントと通信を行います。
