# 反省
制作には数え切れないほどの失敗がありました。

## バックエンド
### クリーンアーキテクチャの誤解（Go）
クリーンアーキテクチャを曲解し、依存関係を希薄にし過ぎてしまいました。
- 異なる層へのアクセスを全てインターフェイスでのアクセスに限定していました。
    - Entity層のデータ型へのアクセスを全てインターフェイス越しに行っていましたが、パフォーマンスに問題が出ていました。
        - Goではインターフェイスのメソッド呼び出しは重い処理でした。
    - Entity層のデータ型の利用を控え、プリミティブ型を多用するようになりました。
    - その結果アンチパターンPrimitive Obsession(プリミティブ型への執着)に陥ってしまいました。

"依存していなければ正しい"という極端な考えになってしまっていました。

### 早すぎたデータベース冗長化（MySQL）
設定を調べて試行錯誤を繰り返し、ようやく実現したものの、使いませんでした。
- 費用の問題で、DBサーバーを一つしか用意できませんでした。
- 費用の問題で、キャッシュサーバー(Redis)を使わずに代替サービス(Firestore)を使うことになってしまいました。
- 知識を得ることで技術的不安を取り除けたものの、必要になってからでも良かったかもと感じています。

## フロントエンド
### 検索フラグ解析（React, TypeScript）
複数のフラグを入力中に、全ての位置の入力で補完入力候補を表示させるという、本来不要な機能に注力していました。
- ユースケースを正しく想定できていませんでした。
    - 本来なら最後のフラグの入力中にだけ補完入力候補を表示させれば十分でした。
    - カーソルを前のフラグに移動させて再度入力する頻度は少なく、候補が表示されなくても許容できる範囲だったと考えています。
- 失敗を活かして、拡張機能の開発では改良した解析処理を実装しました。

## 拡張機能
### UI設計（Yew, Rust）
ブックマーク追加ポップアップを対象のWebページのDOMに埋め込む形式で作っていましたが、ポップアップウィンドウ形式に変更しました。
- 馴染みのあった有名企業の拡張機能のUIに影響されすぎて、判断が盲目になってしまいました。
    - 他の手段がないかを調査して、検討するべきだったと考えています。
        - 今後は最低でも2パターンは検討してから、冷静に比較して判断したいと思っています。
- Webページ内の情報を使うためには、同じDOM内に埋め込んだ方が都合がいいのだろうと思い込んでしまいました。
    - 思い込みや経験則を優先させずに、情報を集めてから意思決定をすべきだったと考えています。
- 結果、実装するに苦労した処理が、まったく要らなくなってしまいました。
    - 次の障害を乗り越えるための地力を鍛えられたと、ポジティブに捉えています。
        - Webページ内のDOMやJSと隔離できる、ClosedなShadow DOM。
        - Shadow DOM内に設置したIframeと、拡張機能バックグラウンドとのメッセージング機構。

### 学習プロセス（Rust）
RustをWebAssemblyとしてJavaScript上で動作させながら学んだため、学習がより困難になったと感じています。
- 開発環境構築
- RustとJSのギャップ
    - メモリ管理方式
    - 型のギャップ
        - RustのString型や&str型と、JavaScriptのstring型
        - Rustのu64型と、JavaScriptのBigInt型やUint8Array型
- エラー原因の特定
    - Rust由来なのか
    - WebAssembly由来なのか
    - JavaScriptへの変換が原因なのか
    - DevToolsの問題なのか
    - ブラウザが未対応なのか
